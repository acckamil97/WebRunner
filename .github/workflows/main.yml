name: sfdx

on:
  workflow_dispatch:



jobs:
  build:
    runs-on: ubuntu-latest

    steps:
  
      - name: npm installation
        run: |
          npm install --location=global sfdx-cli@7.157.0
      - name: test sfdx
        run: |
          sfdx --version
          npm --version
          
      - name: authorization
        run: |
          ${{ secrets.JWTKEYFILE }} > server.key
          sfdx force:auth:jwt:grant --setalias MyOrg --jwtkeyfile server.key --clientid ${{ secrets.CONSUMERKEY }} -u ${{ secrets.USR }}
          sfdx auth:list
